<!doctype html>
<html lang="en">
<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js" integrity="sha512-qTXRIMyZIFb8iQcfjXWCO8+M5Tbc38Qi5WzdPOYZHIlZpzBHG3L3by84BBBOiRGiEb7KKtAOAs5qYdUiZiQNNQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<style>
.entrydate {
	float: right;
}
.highlight {
	background: #8f8f8f12;
}
.unos {
	padding:5px;
	padding-top:10px;
	padding-bottom:10px;
	border-bottom: 1px solid rgba(0,0,0,.1);
}
.unos:hover {
	background:#5454541f;
}
#content2 {
	margin-left: 0px;
}
@media(min-width:992px) {
	#content2 {
		max-width:50%;
		padding-left: 50px;
		padding-top: 50px;
	}
}

</style>

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

</head>
<body>
  
<script>

var urlParams = new URLSearchParams(window.location.search);
var startDate = "2022-01-18";

var datatable = [
	{
		unostitle: 'Materijal',
		weekno: -1,
		list: [
			{ href: 'nastavni_kalendar_2021-2022-v2.pdf', text: 'nastavni_kalendar_2021-2022-v2.pdf' },
			{ href: 'baze_podataka_npp.pdf', text: 'baze_podataka_npp.pdf' },
			{ href: 'sql-referenca.pdf', text: 'SQL referenca' },
			{ href: 'testna.sql', text: 'testna.sql' },
			{ href: 'https://www.w3schools.com/sql/default.asp', text: 'w3schools.com/sql' }
		]
	}
];

// 13 sedm + tutoriali


var additionallist = {
	2: { 
		items: [ 
			{ text: 'Rješenja 2-2', href: 'Rjesenja-2-2.pdf' }
		] 
	},
	3: { 
		items: [ 
	/*		{ text: 'Rješenja 2-3', href: 'Rjesenja-2-3.pdf' } */
		] 
	},
	4: {
		items: [
/* 			{ text: 'Rješenja 2-4', href: 'Rjesenja-2-4.pdf' }  */
		]
	},
	5: {
		items: [
			{ text: 'Nastava za 28.02. se odvija 02.03. u srijedu.' },
			{ text: 'Test 1 Primjer', href:'Test-1-primjer.pdf' },
		]
	},
	11: {
		items: [
			{ text: 'Test 2 Primjer', href:'Test-2-primjer.pdf' },
			{ text: 'Teme za praktične radove', href:'' },
			{ text: 'Teme za referate', href:'' }
		]
	},
	12: {
		items: [
			{ text: 'Nenastavni dan.' },
		]
	},
	13: {
		items: [
			{ text: 'Nastava se odvija 28.04. jer je 25.04. nenastavni dan' }
		]
	},
	19: {
		items: [
			{ text: 'Test 3 Primjer', href:'Test-3-primjer.pdf' },
		]
	},
	20: {
		items: [ 
			{ text: 'Zaključivanje' }
		]
	}
	/*6: {
		items: [
			{
				href: 'testna.sql',
				text: 'testna.sql'
			},
		]
	} //*/
};

var overwritelist = {
	14: {
		items: [ { text: 'Neradni dan' } ]
	}
};

var predavanjaSedmice = new Set([1,2,3,4,7,8,9,13,15,16,17,18]);
var vjezbeSedmice = new Set([2,3,4,7,8,9,13,15,16,17,18]);
var vjezbanjeSedmice = new Set([6,10]);
var testSedmice = new Set([5,11,19]);

var provjeraznanja = new Set([5,11,19]);
var vjezbanje = new Set([6,10]);
var SEMESTAR = 2;
var skipsedmice = new Set([14]);
var skipvjezbe = new Set([1]);

(function() {
	var predavanjeid = 20;
	var weekoffset = 0;
	var predavanjeCounter = 1;
	for (var i = 1; i<=predavanjeid; i++) {
		var parnaStr = i % 2 == 1 ? '— I' : '— II';
		var sedmicaTitle = `Sedmica ${i} ${parnaStr}`;
		
		var entry = {
			unostitle: `Sedmica ${i} ${parnaStr}`,
			weekno: i,
			list: []
		};
		
		if (predavanjaSedmice.has(i)) {
			entry.list.push({ href: `Predavanje-${SEMESTAR}-${predavanjeCounter}.pdf`, text: `Predavanje ${SEMESTAR}-${predavanjeCounter}` });
		}
		
		if (vjezbeSedmice.has(i)) {
			entry.list.push({ href: `Vjezba-${SEMESTAR}-${predavanjeCounter}.pdf`, text: `Vjezba ${SEMESTAR}-${predavanjeCounter}` });
		}
		
		if (testSedmice.has(i)) {
			entry.list.push({ text: `Provjera znanja` });
		}
		
		if (vjezbanjeSedmice.has(i)) {
			entry.list.push({ text: `Vježbanje` });
		}
		
		if (additionallist[i]) {
			additionallist[i].items.forEach(function(item) {
				entry.list.push(item);
			});
		}
		
		if (overwritelist[i]) {
			entry.list = overwritelist[i].items;
		}
		
		if (predavanjaSedmice.has(i)) {
			predavanjeCounter++;
		}
		
		datatable.push(entry); 
	}
}());



datatable = [datatable[0], ...datatable.slice(1).reverse()];

var unos_template = String.raw`
	<div class="unos" data-show="$WEEKNO">
		<div>
			<div style="float:left"><h6>$UNOSTITLE</h6></div><div style="float:right" class="entrydate" data-show="$WEEKNO"></div>
			<div style="clear:both;"></div>
		</div>
		<div class="entry" data-show="$WEEKNO">
			$ROWS
		</div>
	</div>`;

var row_link_template = String.raw`<a target="_blank" href="$HREF">$TEXT</a><br />`;
var row_template = String.raw`<span>$TEXT</span><br />`;

$(document).ready(function () {
	
	(function() {
		datatable.forEach(function(dataitem) {
			if (dataitem.ignore) return;
			var entries = '';
			dataitem.list.forEach(function(listitem) {
				if (listitem.href) {
					entries += row_link_template.replace('$HREF', listitem.href).replace('$TEXT', listitem.text);
				}
				else {
					entries += row_template.replace('$TEXT', listitem.text);
				}
			});
			var unoshtml = unos_template.replace('$ROWS', entries).replaceAll('$WEEKNO', dataitem.weekno).replace('$UNOSTITLE', dataitem.unostitle);
			$('#content2').append(unoshtml);
		});
	}());

	if (!urlParams.has('ignore')) {
		$(".unos").each(function() {
			var weeks = Number($(this).attr('data-show'));
			if (moment() < moment(startDate, 'YYYY-MM-DD').add(weeks, 'weeks')) {
				$(this).hide()
			}
		});
	}
		
	$(".entrydate").each(function() {
		var weeks = Number($(this).attr('data-show'));
		if (weeks < 0) return;
		var theweek =  moment(startDate, 'YYYY-MM-DD').add(weeks+1, 'weeks').subtract(1, 'days');
		var parent = $(this).parents('.unos');
		if (moment() >= moment(theweek).add(1, 'days')) {
			parent.addClass('highlight');
		}
		$(this).html(theweek.format('YYYY-MM-DD'));
	});
});

</script>

<div id="content2" class="container" style="margin-bottom:50px;">
	<h1>Baze podataka</h1><br />
</div>


	<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
  
  
  
</body>
</html>
